#!/bin/sh

if ! username=$(snapctl get username); then
    echo "Username is required"
    exit 1
fi

if ! password=$(snapctl get password); then
    echo "Password is required"
    exit 1
fi

# write credentials file
echo "https://$username:$password@github.com" > $SNAP_DATA/git-credentials
chmod 600 $SNAP_DATA/git-credentials

git config credential.helper "store --file=$SNAP_DATA/git-credentials"